(this.webpackJsonpfamily_app=this.webpackJsonpfamily_app||[]).push([[0],{198:function(e,t,n){"use strict";n.r(t);var r,c,a,s=n(0),i=n(40),o=n.n(i),u=n(59),l=n(146),j=n(147),p=n(153),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_POST":return{posts:[].concat(Object(p.a)(e.posts),[t.payload])};case"INIT_POSTS":return t.payload;case"UPDATE_LIKES":var n={posts:[]};return e.posts.map((function(e){return e.id===t.payload.id?n.posts.push(t.payload):n.posts.push(e)})),n;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.payload;case"LOGOUT":return null;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.payload;case"CLEAR_NOTIFICATION":return null;default:return e}},O=Object(u.combineReducers)({post:d,user:b,notification:f}),h=Object(u.createStore)(O,Object(j.composeWithDevTools)(Object(u.applyMiddleware)(l.a))),x=(n(172),n(21)),v=n(23),m=n(90),g=n(13),w=n(2),k=function(){var e={padding:5};return Object(w.jsxs)("div",{children:[Object(w.jsx)(m.b,{stlye:e,to:"/home",children:"Home"}),Object(w.jsx)(m.b,{style:e,to:"/login",children:"Log in"})]})},y=n(9),N=n.n(y),C=n(11),I=n(211),T=n(215),A=n(88),L=n(94),P=function(e){var t=e.likes,n=e.onClick;return Object(w.jsxs)(T.a,{className:"likeButton",as:"div",labelPosition:"right",onClick:n,children:[Object(w.jsx)(T.a,{color:"red",children:Object(w.jsx)(A.a,{name:"heart"})}),Object(w.jsx)(L.a,{as:"a",basic:!0,color:"red",pointing:"left",children:t})]})},U=function(e){var t=e.post,n=e.updateLikes,r=t.content,c=t.img,a=t.likes,s=function(){var e=Object(C.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"post",children:[Object(w.jsx)("div",{children:Object(w.jsxs)("strong",{children:[Object(w.jsx)("h3",{children:"Content:"})," ",r]})}),Object(w.jsx)("div",{children:"------------"}),Object(w.jsx)("img",{className:"postImage",src:c,width:700,height:500}),Object(w.jsx)("div",{children:Object(w.jsx)(P,{likes:a,onClick:s})}),Object(w.jsx)(I.a,{})]})},S=n(35),E=n.n(S),F="http://localhost:3001/api/posts",_={get:function(e){return Object(C.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("".concat(F,"/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},getAll:function(){return Object(C.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(F);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))()},createNew:function(e){return Object(C.a)(N.a.mark((function t(){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,E.a.post(F,e,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()},update:function(e){var t=this;return Object(C.a)(N.a.mark((function n(){var r,c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.incrementLikes(e),n.next=3,E.a.put("".concat(F,"/").concat(e.id),r);case 3:return c=n.sent,n.abrupt("return",c.data);case 5:case"end":return n.stop()}}),n)})))()},incrementLikes:function(e){return Object(v.a)(Object(v.a)({},e),{},{likes:e.likes+1})}},R={setNotification:function(e,t){return{type:"SET_NOTIFICATION",payload:{field:e,message:t}}},showNotification:function(e){var t=this;if(null===e)return null;var n=e.field,r=e.message;return function(){var e=Object(C.a)(N.a.mark((function e(c){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t.setNotification(n,r)),setTimeout((function(){c(t.clearNotification())}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},clearNotification:function(){return{type:"CLEAR_NOTIFICATION"}}},D={newPostAction:function(e){return{type:"NEW_POST",payload:{content:e.content,img:e.img,likes:e.likes,id:e.id}}},createNewPost:function(e){var t=this;return function(){var n=Object(C.a)(N.a.mark((function n(r){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.createNew(e);case 2:c=n.sent,r(t.newPostAction(c)),r(R.showNotification({field:"New Post",message:"New post created successfully"}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateLikesAction:function(e){return{type:"UPDATE_LIKES",payload:{content:e.content,img:e.img,likes:e.likes,id:e.id}}},initPostsAction:function(){return function(){var e=Object(C.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getAll();case 2:n=e.sent,t({type:"INIT_POSTS",payload:{posts:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},B=D.initPostsAction,G=D.updateLikesAction,W=function(){var e=Object(x.b)();Object(s.useEffect)((function(){e(B())}),[e]);var t=function(){var t=Object(C.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.update(n);case 3:return r=t.sent,t.next=6,e(G(r));case 6:return t.next=8,e(B);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),n=Object(x.c)((function(e){return e.post.posts}));return Object(w.jsx)("div",{children:n&&n.map((function(e){return Object(w.jsx)(U,{className:"post",post:e,updateLikes:t},e.id)}))})},H=n(213),J=n(74),K=n(75),M=K.a.div(r||(r=Object(J.a)(["\n    text-align:left\n"]))),q=n(77),z=function(e){var t=Object(s.useState)(""),n=Object(q.a)(t,2),r=n[0],c=n[1];return{value:r,type:e,onChange:function(e){c(e.target.value)},onReset:function(){c("")}}},Q=function(e){var t=e.type,n=e.onClick,r=e.icon,c=e.label;return Object(w.jsxs)(T.a,{animated:!0,type:t,onClick:n,className:"submitButton",children:[Object(w.jsx)(T.a.Content,{visible:!0,children:t||c}),Object(w.jsx)(T.a.Content,{hidden:!0,children:Object(w.jsx)(A.a,{name:r})})]})},V=function(e,t){return e&&t?{content:e,img:t,likes:0}:null},X=function(e){if(null===e)return{field:"Post",message:"Content and img url must be supplied"}},Y=function(){var e=Object(x.b)(),t=z("text"),n=z("text"),r=function(){var r=Object(C.a)(N.a.mark((function r(a){var s,i;return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),s=V(t.value,n.value),!(i=X(s))){r.next=6;break}return e(R.showNotification(i)),r.abrupt("return");case 6:return r.next=8,e(D.createNewPost(s));case 8:return r.next=10,e(D.initPostsAction());case 10:c();case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),c=function(e){e.preventDefault(),t.onReset(),n.onReset()};return Object(w.jsx)(M,{children:Object(w.jsxs)(H.a,{children:[Object(w.jsxs)(H.a.Field,{children:["Post:",Object(w.jsx)("input",Object(v.a)({},t))]}),Object(w.jsxs)(H.a.Field,{children:["Image URL:",Object(w.jsx)("input",Object(v.a)({},n))]}),Object(w.jsx)(Q,{type:"submit",icon:"arrow right",onClick:r}),Object(w.jsx)(Q,{type:"reset",icon:"redo",onClick:c})]})})},Z=function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(k,{}),Object(w.jsx)("h2",{className:"wallHeading",style:{backgroundColor:"black",color:"white"},children:"Wall"}),Object(w.jsx)(Y,{}),Object(w.jsx)(W,{})]})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.useState)(e),n=Object(q.a)(t,2),r=n[0],c=n[1];return[r,{set:c,toggle:function(){return c(!r)}}]},ee=n(19),te=function(e){var t=e.username,n=e.password;return t.length<5?{field:"username",message:"Username must be at least 6 characters"}:n.length<4?{field:"password",message:"Password must be at least 5 characters"}:null},ne="http://localhost:3001/api/users",re={get:function(e){return Object(C.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=E.a.get("".concat(ne,"/").concat(e)),t.abrupt("return",n.data);case 2:case"end":return t.stop()}}),t)})))()},getAll:function(){return Object(C.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.a.get(ne),e.abrupt("return",t.data);case 2:case"end":return e.stop()}}),e)})))()},createNew:function(e){return Object(C.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=E.a.post(ne,e),t.abrupt("return",n.data);case 2:case"end":return t.stop()}}),t)})))()}},ce={login:function(e){return Object(C.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("http://localhost:3001/api/login",e);case 2:return n=t.sent,console.log(n.data),t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()}},ae={loginUser:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce.login(e);case 2:r=t.sent,n({type:"LOGIN",payload:{user:r}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logoutUser:function(){return{type:"LOGOUT"}},createNewUser:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.createNew(e);case 3:n(R.showNotification({field:"success",message:"".concat(e.username," was created successfully")})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),n(R.showNotification({field:"error",message:"Error creating account."}));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}},se=function(){var e=Object(x.b)(),t=z("text"),n=z("password"),r=function(){var r=Object(C.a)(N.a.mark((function r(){var c,a;return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c={username:t.value,password:n.value},a=te(c),console.error(a),!a){r.next=6;break}return e(R.showNotification(a)),r.abrupt("return");case 6:e(ae.createNewUser(c));case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(w.jsxs)(M,{children:[Object(w.jsx)("h2",{children:"Create new user"}),Object(w.jsxs)(H.a,{onSubmit:r,children:[Object(w.jsxs)(ee.a,{children:[Object(w.jsx)("strong",{children:Object(w.jsx)("h3",{children:"Username:"})}),Object(w.jsx)("input",Object(v.a)(Object(v.a)({},t),{},{className:"username"}))]}),Object(w.jsxs)(ee.a,{children:[Object(w.jsx)("strong",{children:Object(w.jsx)("h3",{children:"Password:"})}),Object(w.jsx)("input",Object(v.a)(Object(v.a)({},n),{},{className:"password"}))]}),Object(w.jsx)(Q,{className:"createUserButton",primary:!0,type:"submit",icon:"right arrow",children:"submit"})]})]})},ie=function(){var e=Object(x.b)(),t=z("text"),n=z("password"),r=function(){var r=Object(C.a)(N.a.mark((function r(){var c;return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c={username:t.value,password:n.value},r.prev=1,r.next=4,e(ae.loginUser(c));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),console.error(r.t0);case 9:case"end":return r.stop()}}),r,null,[[1,6]])})));return function(){return r.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{style:{textAlign:"left"},children:[Object(w.jsx)("h2",{children:"Login"}),Object(w.jsxs)(H.a,{onSubmit:r,children:[Object(w.jsxs)(H.a.Field,{children:[Object(w.jsx)("strong",{children:Object(w.jsx)("h3",{children:"Username:"})}),Object(w.jsx)("input",Object(v.a)({},t))]}),Object(w.jsxs)(H.a.Field,{children:[Object(w.jsx)("strong",{children:Object(w.jsx)("h3",{children:"Password:"})}),Object(w.jsx)("input",Object(v.a)({},n))]}),Object(w.jsx)(Q,{primary:!0,type:"submit",icon:"right arrow",onClick:r,children:"submit"})]})]})})},oe=function(){var e=Object(x.b)(),t=Object(x.c)((function(e){return e.user})),n=$(),r=Object(q.a)(n,2),c=r[0],a=r[1],s={display:c?"none":""},i={display:c?"":"none"};return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:Object(w.jsx)(k,{})}),Object(w.jsx)("div",{children:t?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("p",{className:"welcome",children:["welcome ",t.user.username]}),Object(w.jsx)(Q,{label:"Log out",icon:"sign-out",onClick:function(){e(ae.logoutUser())}})]}):Object(w.jsxs)("div",{className:"loginAndCreate",children:[Object(w.jsxs)("div",{style:s,className:"loginForm",children:[Object(w.jsx)(ie,{}),Object(w.jsx)(Q,{primary:!0,label:"New User",icon:"right arrow",onClick:function(){return a.toggle()},children:"New User"})]}),Object(w.jsxs)("div",{style:i,className:"newUserForm",children:[Object(w.jsx)(se,{}),Object(w.jsx)(Q,{primary:!0,icon:"right arrow",onClick:function(){return a.toggle()},label:"Login",children:"Login"})]})]})})]})},ue=n(214),le=function(e){var t=e.field,n=e.message;return console.log(t),Object(w.jsxs)(ue.a,{children:[Object(w.jsx)(ue.a.Header,{children:t}),Object(w.jsx)("p",{children:n})]})},je=K.a.div(c||(c=Object(J.a)(["\nbackground:#ca9ef0\n"]))),pe=n(212),de=Object(K.a)(pe.a)(a||(a=Object(J.a)(["\n    background:#7c4f96;\n    text-align: center;\n"]))),be=function(){var e=Object(x.c)((function(e){return e.notification}));return Object(w.jsx)(je,{children:Object(w.jsxs)(de,{children:[e&&Object(w.jsx)(le,Object(v.a)({},e)),Object(w.jsx)(m.a,{children:Object(w.jsxs)(g.c,{children:[Object(w.jsx)(g.a,{path:"/login",children:Object(w.jsx)(oe,{})}),Object(w.jsx)(g.a,{path:"/",children:Object(w.jsx)(Z,{})})]})})]})})};o.a.render(Object(w.jsxs)(x.a,{store:h,children:[Object(w.jsx)(be,{}),","]}),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.35b74a65.chunk.js.map